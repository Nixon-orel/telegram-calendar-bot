# Telegram Бот-Календарь

Этот бот для Telegram позволяет управлять событиями и напоминаниями, работая как персональный календарь.

## Функциональность

- Добавление событий с датой и временем
- Настройка напоминаний к событиям
- Возможность добавления множественных напоминаний к одному событию
- Просмотр текущего времени и даты
- Просмотр списка всех событий с напоминаниями
- Поддержка разных часовых поясов для пользователей

## Требования

- Python 3.7+
- python-telegram-bot (версия 20.0+)
- pytz (для работы с часовыми поясами)
- SQLite3 (встроен в Python)

## Установка

### Автоматическая установка (рекомендуется)

1. Клонируйте репозиторий или скопируйте файлы в нужную директорию:

```bash
git clone https://github.com/Nixon-orel/telegram-calendar-bot.git
cd telegram-calendar-bot
```

2. Запустите скрипт установки:

```bash
python setup.py
```

Скрипт выполнит следующие действия:
- Проверит версию Python
- Установит необходимые зависимости
- Создаст файл конфигурации
- Запросит токен бота и сохранит его в конфигурационном файле

### Ручная установка

1. Клонируйте репозиторий или скопируйте файлы в нужную директорию:

```bash
git clone https://github.com/yourusername/telegram-calendar-bot.git
cd telegram-calendar-bot
```

2. Установите необходимые зависимости:

```bash
pip install -r requirements.txt
```

3. Получите токен для вашего бота у [@BotFather](https://t.me/BotFather) в Telegram.

4. Создайте файл `config.py` на основе `config.py.example`:

```bash
cp config.py.example config.py
```

5. Откройте файл `config.py` и замените `"YOUR_TELEGRAM_BOT_TOKEN"` на полученный токен.

## Примеры использования

Примеры использования бота и подробные инструкции по взаимодействию с ним можно найти в файле [examples.md](examples.md).

## Запуск приложения

У вас есть несколько вариантов запуска приложения:

### Вариант 1: Запуск всех компонентов одновременно (рекомендуется)

Для одновременного запуска бота и планировщика напоминаний используйте скрипт `run.py`:

```bash
python run.py
```

Этот скрипт запустит оба компонента и будет автоматически перезапускать их в случае сбоя.

### Вариант 2: Запуск компонентов по отдельности

Если вы хотите запустить компоненты по отдельности, вы можете сделать это следующим образом:

#### Запуск бота

```bash
python main.py
```

#### Запуск планировщика напоминаний

```bash
python reminder_scheduler.py
```

Рекомендуется запускать планировщик напоминаний в фоновом режиме или как системный сервис, чтобы он работал постоянно.

## Команды бота

- `/start` - Запустить бота и показать главное меню
- `/cancel` - Отменить текущую операцию и вернуться в главное меню

## Использование

1. Отправьте команду `/start` боту, чтобы начать взаимодействие.
2. Выберите нужное действие из меню:
   - **Добавить событие** - создать новое событие с датой и временем
   - **Добавить напоминание** - добавить напоминание к существующему событию
   - **Просмотреть события** - показать список всех ваших событий
   - **Текущее время и дата** - показать текущее время и дату
   - **Настройка часового пояса** - выбрать ваш часовой пояс

### Добавление события

1. Выберите "Добавить событие" в главном меню
2. Введите название события
3. Введите дату события в формате ДД.ММ.ГГГГ
4. Введите время события в формате ЧЧ:ММ
5. После добавления события вы можете сразу добавить к нему напоминание

### Добавление напоминания

1. Выберите "Добавить напоминание" в главном меню
2. Выберите событие из списка
3. Введите дату напоминания в формате ДД.ММ.ГГГГ
4. Введите время напоминания в формате ЧЧ:ММ
5. После добавления напоминания вы можете добавить еще одно напоминание к этому же событию

### Просмотр событий

1. Выберите "Просмотреть события" в главном меню
2. Выберите событие из списка для просмотра подробной информации
3. В подробной информации о событии вы увидите все напоминания, связанные с этим событием

### Настройка часового пояса

1. Выберите "Настройка часового пояса" в главном меню
2. Выберите ваш часовой пояс из списка доступных
3. После выбора часового пояса вы увидите текущее время и дату в выбранном часовом поясе
4. Все напоминания будут отправляться в соответствии с вашим часовым поясом

## Структура базы данных

Бот использует SQLite для хранения данных о событиях, напоминаниях и настройках пользователей:

- Таблица `events` - хранит информацию о событиях
  - `id` - уникальный идентификатор события
  - `user_id` - идентификатор пользователя Telegram
  - `name` - название события
  - `event_date` - дата события
  - `event_time` - время события

- Таблица `reminders` - хранит информацию о напоминаниях
  - `id` - уникальный идентификатор напоминания
  - `event_id` - идентификатор связанного события
  - `reminder_date` - дата напоминания
  - `reminder_time` - время напоминания

- Таблица `user_settings` - хранит настройки пользователей
  - `user_id` - идентификатор пользователя Telegram (первичный ключ)
  - `timezone` - часовой пояс пользователя

## Дальнейшие улучшения

- Добавление периодических напоминаний
- Возможность удаления событий и напоминаний
- Интеграция с другими календарными сервисами
- Экспорт и импорт событий в формате iCal
- Автоматическое определение часового пояса пользователя

## Вклад в проект

Если вы хотите внести свой вклад в проект, пожалуйста, ознакомьтесь с [руководством по внесению вклада](CONTRIBUTING.md).

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности можно найти в файле [LICENSE](LICENSE).